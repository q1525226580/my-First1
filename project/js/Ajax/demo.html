<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
</head>

<body>
  <!-- <form action="#" method="post">
      <div>用户名：<input type="text" name="user" /></div>
      <div>用户名：<input type="password" name="pwd" /></div>
      <input type="submit" />
    </form> -->

  <!-- <script>
    get: 请求本地的demo.txt
    var myajax
    if (window.XMLHttpRequest) {
      myajax = new XMLHttpRequest()
    } else {
      myajax = new ActiveXObject('Microsoft.XMLHTTP')
    }
    myajax.open('get', './demo.txt?user=lisi&pwd=123', true)
    myajax.send()
    myajax.onreadystatechange = function () {
      if (myajax.readyState == 4) {
        if (myajax.status == 200) {
          console.log(myajax.responseText)
        }
      }
    }
  </script> -->

  <div>用户名：<input type="text" /></div>
  <div>密码：<input type="password" /></div>
  <button onclick="reg()">注册</button>

  <script>
    // post  实现注册
    var user = document.getElementsByTagName('input')[0]
    var pwd = document.getElementsByTagName('input')[1]

    function reg() {
      var myajax
      if (window.XMLHttpRequest) {
        myajax = new XMLHttpRequest()
      } else {
        myajax = new ActiveXObject('Microsoft.XMLHTTP')
      }
      myajax.open('post', 'http://127.0.0.1:3001/user', true)
      // post  数据在send（数据）
      // 需要传递的数据时后台钉死的
      var data = 'act=reg&user=' + user.value + '&pass=' + pwd.value
      myajax.setRequestHeader(
        'content-type',
        'application/x-www-form-urlencoded'
      )
      myajax.send(data)
      myajax.onreadystatechange = function () {
        if (myajax.readyState == 4) {
          if (myajax.status == 200) {
            console.log(typeof myajax.responseText)
            console.log(myajax.responseText)
          }
        }
      }
    }
  </script>
</body>

</html>
